(()=>{"use strict";var e,x={696:(e,s,i)=>{var a=i(861),r=i(82);function o(n){return c.apply(this,arguments)}function c(){return(c=(0,a.Z)(function*(n){return yield r.db.movies.put(n,n.id)})).apply(this,arguments)}function l(){return(l=(0,a.Z)(function*(n){const u={...n.movie},d=yield n.blob.arrayBuffer();return yield o(u),yield k({movie_id:u.id,start:0,end:d.byteLength,data:d})})).apply(this,arguments)}function p(n){return y.apply(this,arguments)}function y(){return(y=(0,a.Z)(function*(n){const u=yield r.db.movie_fragments.get([n.movie_id,n.start]);u&&(yield r.db.buffers.delete(u.data_id));const d=yield r.db.buffers.put(n.data);yield r.db.movie_fragments.put({data_id:d,movie_id:n.movie_id,start:n.start,end:n.end})})).apply(this,arguments)}function k(n){return m.apply(this,arguments)}function m(){return(m=(0,a.Z)(function*(n){if(n.data.byteLength<2e6)return yield p(n);let d=0,M=n.data.byteLength;for(;M>0;){const v=Math.min(M,2e6);yield p({movie_id:n.movie_id,data:n.data.slice(d,d+v),start:n.start+d,end:n.start+d+v}),d+=v,M-=v}})).apply(this,arguments)}function f(){return(f=(0,a.Z)(function*(){return yield r.db.movies.toArray()})).apply(this,arguments)}function h(){return(h=(0,a.Z)(function*(n){return yield r.db.movies.get(n)})).apply(this,arguments)}function g(){return(g=(0,a.Z)(function*(){yield r.db.delete()})).apply(this,arguments)}function b(){return(b=(0,a.Z)(function*(n){for(let u of yield(yield r.db.movie_fragments.where({movie_id:n}).sortBy("start")).reverse())yield r.db.buffers.delete(u.data_id),yield r.db.movie_fragments.delete([u.movie_id,u.start]),yield r.db.movies.update(n,{downloaded_length:u.start});yield r.db.movies.delete(n)})).apply(this,arguments)}const F={putMovie:o,putMovieWithBlob:function _(n){return l.apply(this,arguments)},getMovies:function O(){return f.apply(this,arguments)},getMovie:function B(n){return h.apply(this,arguments)},putMovieFragment:k,clearIndexDB:function L(){return g.apply(this,arguments)},deleteMovieAndFragments:function P(n){return b.apply(this,arguments)}};addEventListener("message",function(){var n=(0,a.Z)(function*({data:u}){if(u&&void 0!==u.counter&&void 0!==u.event&&F[u.event])try{postMessage({counter:u.counter,data:yield F[u.event](u.data)})}catch(d){d instanceof Error?postMessage({counter:u.counter,error:d.message}):postMessage({counter:u.counter,error:"unknown error"})}else console.error("message has no counter or event invalid")});return function(u){return n.apply(this,arguments)}}())}},w={};function t(e){var s=w[e];if(void 0!==s)return s.exports;var i=w[e]={exports:{}};return x[e](i,i.exports,t),i.exports}t.m=x,t.x=()=>{var e=t.O(void 0,[82],()=>t(696));return t.O(e)},e=[],t.O=(s,i,a,r)=>{if(!i){var c=1/0;for(o=0;o<e.length;o++){for(var[i,a,r]=e[o],_=!0,l=0;l<i.length;l++)(!1&r||c>=r)&&Object.keys(t.O).every(f=>t.O[f](i[l]))?i.splice(l--,1):(_=!1,r<c&&(c=r));if(_){e.splice(o--,1);var p=a();void 0!==p&&(s=p)}}return s}r=r||0;for(var o=e.length;o>0&&e[o-1][2]>r;o--)e[o]=e[o-1];e[o]=[i,a,r]},t.d=(e,s)=>{for(var i in s)t.o(s,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:s[i]})},t.f={},t.e=e=>Promise.all(Object.keys(t.f).reduce((s,i)=>(t.f[i](e,s),s),[])),t.u=e=>e+".24fad4c3b81c2f41.js",t.miniCssF=e=>{},t.o=(e,s)=>Object.prototype.hasOwnProperty.call(e,s),(()=>{var e;t.tt=()=>(void 0===e&&(e={createScriptURL:s=>s},typeof trustedTypes<"u"&&trustedTypes.createPolicy&&(e=trustedTypes.createPolicy("angular#bundler",e))),e)})(),t.tu=e=>t.tt().createScriptURL(e),t.p="",(()=>{var e={696:1};t.f.i=(r,o)=>{e[r]||importScripts(t.tu(t.p+t.u(r)))};var i=self.webpackChunksyncwatch_lite=self.webpackChunksyncwatch_lite||[],a=i.push.bind(i);i.push=r=>{var[o,c,_]=r;for(var l in c)t.o(c,l)&&(t.m[l]=c[l]);for(_&&_(t);o.length;)e[o.pop()]=1;a(r)}})(),(()=>{var e=t.x;t.x=()=>t.e(82).then(e)})(),t.x()})();